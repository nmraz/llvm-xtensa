; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=xtensa | FileCheck %s
define i32 @alloca_func(i32 %val) {
; CHECK-LABEL: alloca_func:
; CHECK:       # %bb.0:
; CHECK-NEXT:    addi a1, a1, -4
; CHECK-NEXT:    addi a3, a1, 0
; CHECK-NEXT:    s32i a2, a3, 0
; CHECK-NEXT:    addi a2, a1, 0
; CHECK-NEXT:    l32i a2, a2, 0
; CHECK-NEXT:    addi a1, a1, 4
; CHECK-NEXT:    ret.n
  %p = alloca i32
  store i32 %val, ptr %p
  %retval = load i32, ptr %p
  ret i32 %retval
}
